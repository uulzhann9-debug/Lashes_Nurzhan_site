<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Äî Lashes Nurzhan</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å üíª</h1>

    <table border="1" cellpadding="5">
        <tr>
            <th>–≠—Ñ—Ñ–µ–∫—Ç</th>
            <th>–ú–∞—Å—Ç–µ—Ä</th>
            <th>–¶–µ–Ω–∞</th>
        </tr>
        {% for effect, masters in prices.items() %}
            {% for master, price in masters.items() %}
                <tr>
                    <td>{{ effect }}</td>
                    <td>{{ master }}</td>
                    <td>
                        <input type="number" id="{{ effect }}_{{ master }}" value="{{ price }}">
                        <button onclick="updatePrice('{{ effect }}', '{{ master }}')">üíæ</button>
                    </td>
                </tr>
            {% endfor %}
        {% endfor %}
    </table>

    <input type="password" id="admin_pass" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"><br><br>

    <script>
        async function updatePrice(effect, master) {
            const price = document.getElementById(`${effect}_${master}`).value;
            const password = document.getElementById("admin_pass").value;

            const res = await fetch('/update_price', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({effect, master, price, password})
            });
            const data = await res.json();
            alert(data.message || "–ì–æ—Ç–æ–≤–æ!");
        }
    </script>

    <p><a href="/">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a></p>
</body>
</html>
