<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</title>
  <style>
    body { font-family: Arial; background:#fafafa; padding:20px; }
    table { width: 80%; margin:auto; border-collapse: collapse; }
    th, td { border:1px solid #ccc; padding:8px; text-align:center; }
    th { background:#eee; }
    input { width:70px; text-align:center; }
    button { padding:6px 10px; background:#4CAF50; color:white; border:none; border-radius:4px; cursor:pointer; }
  </style>
</head>
<body>
  <h2 style="text-align:center;">–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω (–ø–∞—Ä–æ–ª—å: admin123)</h2>
  <table>
    <tr><th>–≠—Ñ—Ñ–µ–∫—Ç</th><th>–¢–æ–ø –º–∞—Å—Ç–µ—Ä</th><th>–ú–∞—Å—Ç–µ—Ä</th><th>–°—Ç–∞–∂—ë—Ä</th><th>–£—á–µ–Ω–∏—Ü–∞</th><th>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</th></tr>
    {% for e, mdata in prices.items() %}
    <tr>
      <td>{{ e }}</td>
      {% for m, v in mdata.items() %}
      <td><input type="number" id="{{ e }}_{{ m }}" value="{{ v }}"></td>
      {% endfor %}
      <td><button onclick="save('{{ e }}')">üíæ</button></td>
    </tr>
    {% endfor %}
  </table>

  <script>
    async function save(effect) {
      const masters = ["–¢–æ–ø –º–∞—Å—Ç–µ—Ä","–ú–∞—Å—Ç–µ—Ä","–°—Ç–∞–∂—ë—Ä","–£—á–µ–Ω–∏—Ü–∞"];
      const password = prompt("–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:");
      for (const m of masters) {
        const el = document.getElementById(effect + "_" + m);
        const res = await fetch('/update_price', {
          method:'POST', headers:{'Content-Type':'application/json'},
          body: JSON.stringify({effect, master:m, price:el.value, password})
        });
        const data = await res.json();
        if (data.status!=="success") alert(data.message || "–û—à–∏–±–∫–∞!");
      }
      alert("‚úÖ –¶–µ–Ω—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã!");
    }
  </script>
</body>
</html>